(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2ab5"],{"1eWw":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("ma/q");t.default={props:{charData:{type:Array,default:function(){return{data:[]}}},width:{type:Number,default:1200},height:{type:Number,default:500},id:{type:String,required:!0},title:{type:String,default:null}},data:function(){return{columnPlot:null,ds:null,dv:null}},watch:{charData:function(e,t){this.drawChart(e)}},methods:{drawChart:function(){var e=this.charData;null===this.columnPlot?(this.columnPlot=new i.Column(this.id,{height:this.height,width:this.width,title:{visible:!0,text:this.title},padding:"auto",forceFit:!0,data:e,xField:"type",yField:"value",meta:{type:{alias:"类别"},value:{alias:"访问量"}},label:{visible:!0,style:{fill:"#0D0E68",fontSize:12,fontWeight:600,opacity:.6}}}),this.columnPlot.render()):this.columnPlot.changeData(e)}}}},"4SGn":function(e,t,a){"use strict";var i=function(){var e=this.$createElement;return(this._self._c||e)("div",{attrs:{id:this.id}})},n=[];a.d(t,"a",function(){return i}),a.d(t,"b",function(){return n})},"63rY":function(e,t,a){},"8hQl":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("ma/q");t.default={props:{charData:{type:Array,default:function(){return{data:[]}}},width:{type:Number,default:1200},height:{type:Number,default:500},id:{type:String,required:!0},title:{type:String,default:null}},data:function(){return{areaPlot:null,ds:null,dv:null}},watch:{charData:function(e,t){this.drawChart(e)}},methods:{drawChart:function(){var e=this.charData;null===this.areaPlot?(this.areaPlot=new i.StackedArea(this.id,{height:this.height,width:this.width,title:{visible:!0,text:this.title},padding:"auto",forceFit:!0,data:e,xField:"date",yField:"value",stackField:"country",yAxis:{type:"dateTime",tickCount:5},legend:{visible:!0,position:"right-top"},responsive:!0}),this.areaPlot.render()):this.areaPlot.changeData(e)}}}},"9g5I":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticClass:"dashboard-editor-container"},[a("el-row",[a("el-col",{staticStyle:{"padding-bottom":"20px"},attrs:{span:24}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"title"},[a("h3",[e._v("行为数据")]),e._v(" "),a("div",{staticClass:"right",on:{click:function(t){e.handleDownload("behavior")}}},[e._v("下载")]),e._v(" "),a("div",[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){e.setDate("behavior")}},model:{value:e.behaviorDate,callback:function(t){e.behaviorDate=t},expression:"behaviorDate"}},e._l(e.behavior,function(e){return a("el-option",{key:e.value,attrs:{label:e.lable,value:e.value}})})),e._v(" "),a("span",{staticClass:"date"},[e._v(e._s(e.behaviorShowDate))])],1)]),e._v(" "),a("stacked-area",{directives:[{name:"loading",rawName:"v-loading",value:e.analyze_loading,expression:"analyze_loading"}],attrs:{"char-data":e.behaviorData,id:"c1"}})],1)],1),e._v(" "),a("el-col",{staticStyle:{"padding-bottom":"20px"},attrs:{span:24}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"title"},[a("h3",[e._v("留存趋势")]),e._v(" "),a("div",{staticClass:"right",on:{click:function(t){e.handleDownload("keep")}}},[e._v("下载")]),e._v(" "),a("div",[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){e.setDate("keep")}},model:{value:e.keepDate,callback:function(t){e.keepDate=t},expression:"keepDate"}},e._l(e.keep,function(e){return a("el-option",{key:e.value,attrs:{label:e.lable,value:e.value}})})),e._v(" "),a("span",{staticClass:"date"},[e._v(e._s(e.keepShowDate))])],1)]),e._v(" "),a("stacked-area",{directives:[{name:"loading",rawName:"v-loading",value:e.keep_loading,expression:"keep_loading"}],attrs:{"char-data":e.keepData,id:"c2"}})],1)],1),e._v(" "),a("el-col",{staticStyle:{"padding-bottom":"20px"},attrs:{span:24}},[a("el-card",{attrs:{shadow:"hover"}},[a("div",{staticClass:"title"},[a("h3",[e._v("来源分析")]),e._v(" "),a("div",{staticClass:"right",on:{click:function(t){e.handleDownload("source")}}},[e._v("下载")]),e._v(" "),a("div",[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){e.setDate("source")}},model:{value:e.sourceDate,callback:function(t){e.sourceDate=t},expression:"sourceDate"}},e._l(e.source,function(e){return a("el-option",{key:e.value,attrs:{label:e.lable,value:e.value}})})),e._v(" "),a("span",{staticClass:"date"},[e._v(e._s(e.sourceShowDate))])],1)]),e._v(" "),a("plot-column",{directives:[{name:"loading",rawName:"v-loading",value:e.source_loading,expression:"source_loading"}],attrs:{"char-data":e.sourceData,id:"c3"}})],1)],1)],1)],1)},n=[];a.d(t,"a",function(){return i}),a.d(t,"b",function(){return n})},B4CQ:function(e,t,a){},FU13:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l(a("pNQy")),n=l(a("q4vD")),r=a("SPtI"),o=a("7Qib");function l(e){return e&&e.__esModule?e:{default:e}}t.default={name:"StatisticsVisitList",components:{StackedArea:i.default,PlotColumn:n.default},data:function(){return{listLoading:!1,options:[],analyze_loading:!1,behaviorData:[],behaviorExcelData:[],behaviorDate:7,behaviorShowDate:"",behavior:[{value:7,lable:"最近7天"},{value:30,lable:"最近30天"}],keep_loading:!1,keepData:[],keepExcelData:[],keepDate:7,keepShowDate:"",keep:[{value:7,lable:"最近7天"},{value:30,lable:"最近30天"}],source_loading:!1,sourceData:[],sourceExcelData:[],sourceDate:7,sourceShowDate:"",source:[{value:7,lable:"最近7天"},{value:30,lable:"最近30天"}]}},created:function(){this.getBehavior(),this.getKeep(),this.getSource()},methods:{getBehavior:function(){var e=this;this.analyze_loading=!0,this.behaviorShowDate=(0,o.getBeforeDate)(this.behaviorDate)+"至"+(0,o.getBeforeDate)(1),(0,r.behavior)({date:this.behaviorDate}).then(function(t){e.behaviorData=t.data,e.behaviorExcelData=[];var a={};for(var i in e.behaviorData.map(function(e){a[e.date]||(a[e.date]={}),a[e.date]=[0,0,0,e.date],"累计访问人数"===e.country?a[e.date][0]=e.value:"转发次数"===e.country?a[e.date][1]=e.value:"转发人数"===e.country&&(a[e.date][2]=e.value)}),a)e.behaviorExcelData.push([a[i][0],a[i][1],a[i][2]],a[i][3]);e.analyze_loading=!1})},getKeep:function(){var e=this;this.keep_loading=!0,this.keepShowDate=(0,o.getBeforeDate)(this.keepDate)+"至"+(0,o.getBeforeDate)(1),(0,r.keep)({date:this.keepDate}).then(function(t){e.keepData=t.data,e.keepExcelData=[];var a={};for(var i in e.keepData.map(function(e){a[e.date]||(a[e.date]={}),a[e.date]=[0,0,e.date],"新增用户留存"===e.country?a[e.date][0]=e.value:"活跃用户留存"===e.country&&(a[e.date][1]=e.value)}),a)e.keepExcelData.push([a[i][0],a[i][1],a[i][2]]);e.keep_loading=!1})},getSource:function(){var e=this;this.source_loading=!0,this.sourceShowDate=(0,o.getBeforeDate)(this.sourceDate)+"至"+(0,o.getBeforeDate)(1),(0,r.source)({date:this.sourceDate}).then(function(t){e.sourceData=t.data,e.source_loading=!1})},setDate:function(e){"behavior"===e?(this.behaviorShowDate=(0,o.getBeforeDate)(this.behaviorDate)+"至"+(0,o.getBeforeDate)(1),this.getBehavior()):"keep"===e?(this.keepShowDate=(0,o.getBeforeDate)(this.keepDate)+"至"+(0,o.getBeforeDate)(1),this.getKeep()):"source"===e&&(this.sourceShowDate=(0,o.getBeforeDate)(this.sourceDate)+"至"+(0,o.getBeforeDate)(1),this.getSource())},handleDownload:function(e){var t=this;this.listLoading=!0,Promise.all([a.e("chunk-04d5"),a.e("chunk-eeb4")]).then(a.t.bind(null,"S/jZ",7)).then(function(a){var i=[],n=[],r="";"behavior"===e?(i=["累计访问人数","转发次数","转发人数","时间"],r="行为数据",n=t.behaviorExcelData):"keep"===e?(i=["新增用户留存","活跃用户留存","时间"],r="留存趋势",n=t.keepExcelData):"source"===e&&(i=[],n.push([]),t.sourceData.forEach(function(e){i.push(e.type),n[0].push(e.value)}),r="来源分析"),a.export_json_to_excel({header:i,data:n,filename:r}),t.listLoading=!1})}}}},H92S:function(e,t,a){"use strict";var i=a("B4CQ");a.n(i).a},I0Dc:function(e,t,a){"use strict";var i=a("63rY");a.n(i).a},K1Vi:function(e,t,a){"use strict";var i=a("YfE1");a.n(i).a},MNCy:function(e,t,a){"use strict";a.r(t);var i=a("FU13"),n=a.n(i);for(var r in i)"default"!==r&&function(e){a.d(t,e,function(){return i[e]})}(r);t.default=n.a},SPtI:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.behavior=function(e){return(0,i.default)({url:"statistic/behavior",method:"GET",params:e})},t.keep=function(e){return(0,i.default)({url:"statistic/keep",method:"GET",params:e})},t.source=function(e){return(0,i.default)({url:"statistic/source",method:"GET",params:e})},t.age_and_sex=function(e){return(0,i.default)({url:"statistic/age_and_sex",method:"GET",params:e})},t.pay=function(e){return(0,i.default)({url:"statistic/pay",method:"GET",params:e})};var i=function(e){return e&&e.__esModule?e:{default:e}}(a("t3Un"))},XNj0:function(e,t,a){"use strict";var i=function(){var e=this.$createElement;return(this._self._c||e)("div",{attrs:{id:this.id}})},n=[];a.d(t,"a",function(){return i}),a.d(t,"b",function(){return n})},YfE1:function(e,t,a){},fb3i:function(e,t,a){"use strict";a.r(t);var i=a("9g5I"),n=a("MNCy");for(var r in n)"default"!==r&&function(e){a.d(t,e,function(){return n[e]})}(r);a("I0Dc");var o=a("KHd+"),l=Object(o.a)(n.default,i.a,i.b,!1,null,"5cc09a2a",null);l.options.__file="visit.vue",t.default=l.exports},pNQy:function(e,t,a){"use strict";a.r(t);var i=a("4SGn"),n=a("qtwa");for(var r in n)"default"!==r&&function(e){a.d(t,e,function(){return n[e]})}(r);a("H92S");var o=a("KHd+"),l=Object(o.a)(n.default,i.a,i.b,!1,null,null,null);l.options.__file="StackedArea.vue",t.default=l.exports},q4vD:function(e,t,a){"use strict";a.r(t);var i=a("XNj0"),n=a("uRLG");for(var r in n)"default"!==r&&function(e){a.d(t,e,function(){return n[e]})}(r);a("K1Vi");var o=a("KHd+"),l=Object(o.a)(n.default,i.a,i.b,!1,null,null,null);l.options.__file="Column.vue",t.default=l.exports},qtwa:function(e,t,a){"use strict";a.r(t);var i=a("8hQl"),n=a.n(i);for(var r in i)"default"!==r&&function(e){a.d(t,e,function(){return i[e]})}(r);t.default=n.a},uRLG:function(e,t,a){"use strict";a.r(t);var i=a("1eWw"),n=a.n(i);for(var r in i)"default"!==r&&function(e){a.d(t,e,function(){return i[e]})}(r);t.default=n.a}}]);