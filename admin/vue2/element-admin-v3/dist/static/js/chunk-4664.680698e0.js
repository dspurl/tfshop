(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4664"],{"+U+e":function(t,e,i){"use strict";i.r(e);var a=i("ZO9G"),n=i.n(a);for(var l in a)"default"!==l&&function(t){i.d(e,t,function(){return a[t]})}(l);e.default=n.a},"9vIq":function(t,e,i){},BeLl:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(t){return(0,a.default)({url:"dhl",method:"GET",params:t})},e.create=function(t){return t=n.default.parse(t),(0,a.default)({url:"dhl",method:"POST",data:t})},e.edit=function(t){return t=n.default.parse(t),(0,a.default)({url:"dhl/"+t.id,method:"POST",data:t})},e.destroy=function(t){return(0,a.default)({url:"dhl/destroy/"+t,method:"POST"})};var a=l(i("t3Un")),n=l(i("Qyje"));function l(t){return t&&t.__esModule?t:{default:t}}},Elrn:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"app-container"},[i("el-card",{attrs:{shadow:"always"}},[i("el-row",{attrs:{type:"flex"}},[i("el-col",{staticStyle:{"font-size":"18px","line-height":"45px","font-weight":"bold"},attrs:{span:20}},[t._v("订单号："+t._s(t.list.identification)+"【"+t._s(t.list.type)+"】")]),t._v(" "),i("el-col",{staticStyle:{"text-align":"right"},attrs:{span:3}},[0===t.list.shipping_status&&2===t.list.state?i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.handleDelete(t.list,2)}}},[t._v("发货")]):t._e()],1),t._v(" "),i("el-col",{attrs:{span:1}})],1),t._v(" "),i("el-row",{staticStyle:{"line-height":"35px","font-size":"14px"},attrs:{type:"flex"}},[i("el-col",{attrs:{span:10}},[t._v("下单时间："+t._s(t.list.created_at))]),t._v(" "),i("el-col",{attrs:{span:10}},[t._v("买家信息："+t._s(t.list.good_location?t.list.good_location.name:""))]),t._v(" "),i("el-col",{staticStyle:{color:"rgba(0, 0, 0, 0.447)"},attrs:{span:2}},[t._v("状态")]),t._v(" "),i("el-col",{staticStyle:{color:"rgba(0, 0, 0, 0.447)"},attrs:{span:2}},[t._v("订单金额")])],1),t._v(" "),i("el-row",{staticStyle:{"line-height":"35px","font-size":"14px"},attrs:{type:"flex"}},[i("el-col",{attrs:{span:10}},[t._v("备注："+t._s(t.list.remark?t.list.remark:"无"))]),t._v(" "),i("el-col",{attrs:{span:10}},[t._v("联系方式："+t._s(t.list.good_location?t.list.good_location.cellphone:""))]),t._v(" "),i("el-col",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{span:2}},[t._v(t._s(t.list.state_show))]),t._v(" "),i("el-col",{staticStyle:{"font-weight":"bold","font-size":"18px"},attrs:{span:2}},[t._v("¥ "+t._s(t._f("1000")(t.list.total)))])],1),t._v(" "),i("el-row",{staticStyle:{"line-height":"35px","font-size":"14px"},attrs:{type:"flex"}},[t.list.good_location?i("el-col",{attrs:{span:10}},[t._v("收货地址："+t._s(t.list.good_location.location)+" ("+t._s(t.list.good_location.address)+")")]):t._e()],1)],1),t._v(" "),i("el-card",{staticStyle:{"margin-top":"25px"},attrs:{shadow:"always"}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v("订单进度")])]),t._v(" "),i("el-steps",{attrs:{active:t.order_progress,"align-center":""}},[i("el-step",{attrs:{description:t.list.created_at,title:"买家下单"}}),t._v(" "),i("el-step",{attrs:{description:"1970-01-01 08:00:00"!==t.list.pay_time?t.list.pay_time:"",title:"买家付款"}}),t._v(" "),"卡密/网盘"!==t.goodType&&"下载商品"!==t.goodType?i("el-step",{attrs:{description:"1970-01-01 08:00:00"!==t.list.shipping_time?t.list.shipping_time:"",title:"商家发货"}}):t._e(),t._v(" "),i("el-step",{attrs:{description:"1970-01-01 08:00:00"!==t.list.confirm_time?t.list.confirm_time:"",title:"交易完成"}})],1)],1),t._v(" "),i("el-card",{staticStyle:{"margin-top":"25px"},attrs:{shadow:"always"}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v("商品信息")]),t._v(" "),i("el-link",{staticClass:"invoice",attrs:{underline:!1,type:"primary"},on:{click:function(e){t.dialogInvoiceVisible=!0}}},[t._v("送货单")])],1),t._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list.goods_list,"summary-method":t.getSummaries,border:"","show-summary":""}},[i("el-table-column",{attrs:{type:"index",label:"编号",width:"50"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("el-image",{staticStyle:{width:"45px",height:"45px"},attrs:{src:t.row.img,"preview-src-list":[t.row.img]}})]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"商品",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("router-link",{attrs:{to:{path:"/commodityManagement/good/goodDetail",query:{id:e.row.good_id}},target:"_blank"}},[t._v(" "+t._s(e.row.name))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"类型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.good.type))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"规格"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.specification))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"单价（元）",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.price))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"数量（件）",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.number))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"金额（元）",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.price*e.row.number))])]}}])})],1)],1),t._v(" "),i("el-card",{staticStyle:{"margin-top":"25px"},attrs:{shadow:"always"}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v("在线支付记录")])]),t._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list.payment_log_all,border:""}},[i("el-table-column",{attrs:{label:"订单描述",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"商户订单号",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.number))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"第三方订单号",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.transaction_id))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"支付类型",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.type_show))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作金额（元）",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(t._f("1000")(e.row.money_show)))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"平台",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.platform_show))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.state_show))])]}}])})],1)],1),t._v(" "),t.list.good_location?i("el-card",{staticStyle:{"margin-top":"25px"},attrs:{shadow:"always"}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v("配送")])]),t._v(" "),i("div",[i("el-form",{ref:"dataForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:t.rules,model:t.temp,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"运费"}},[t.list.carriage?i("span",[t._v(t._s(t._f("1000")(t.list.carriage))+"元")]):i("span",[t._v("免运费")])]),t._v(" "),i("el-form-item",{attrs:{label:"物流公司",prop:"dhl_id"}},[t.list.dhl&&!t.temp.dhl?i("div",[t._v(t._s(t.list.dhl.name))]):i("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.temp.dhl_id,callback:function(e){t.$set(t.temp,"dhl_id",e)},expression:"temp.dhl_id"}},t._l(t.dhl,function(t,e){return i("el-option",{key:e,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"运单号",prop:"odd"}},[t.list.odd&&!t.temp.odd?i("div",[t._v(t._s(t.list.odd))]):i("el-input",{ref:"odd",attrs:{maxlength:"255",clearable:""},model:{value:t.temp.odd,callback:function(e){t.$set(t.temp,"odd",e)},expression:"temp.odd"}})],1),t._v(" "),3===t.list.state?i("el-form-item",[t.temp.id?i("el-button",{attrs:{loading:t.shipmentLoading,type:"primary"},on:{click:t.setDhlUpdate}},[t._v("保存")]):i("el-button",{attrs:{type:"primary"},on:{click:t.dhlUpdate}},[t._v("编辑")])],1):t._e()],1)],1)]):t._e(),t._v(" "),3===t.list.state&&t.list.automaticReceivingState?i("el-card",{staticStyle:{"margin-top":"25px"},attrs:{shadow:"always"}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v("延长收货时间")])]),t._v(" "),i("div",[i("el-form",{ref:"receivingForm",staticStyle:{width:"400px","margin-left":"50px"},attrs:{rules:t.receivingRules,model:t.receivingTemp,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"自动收货时间"}},[i("span",[t._v(t._s(t.list.receiving_time))])]),t._v(" "),i("el-form-item",{attrs:{label:"设置收货时间",prop:"new_receiving_time"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"选择收货时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.receivingTemp.new_receiving_time,callback:function(e){t.$set(t.receivingTemp,"new_receiving_time",e)},expression:"receivingTemp.new_receiving_time"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{loading:t.shipmentLoading,type:"primary"},on:{click:t.receivingEdit}},[t._v("保存")])],1)],1)],1)]):t._e(),t._v(" "),t.list.good_code.length?i("el-card",{staticStyle:{"margin-top":"25px"},attrs:{shadow:"always"}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v(t._s(t.code_type?"网盘":"卡密"))])]),t._v(" "),i("div",{staticClass:"code-list"},t._l(t.list.good_code,function(e,a){return i("div",{key:a,staticClass:"li"},[e.name?i("div",{staticClass:"name"},[t._v(t._s(t.code_type?"网盘地址":"卡号")+"："+t._s(e.name)),i("span",{staticClass:"el-icon-copy-document",on:{click:function(i){t.doCopy(e.name)}}})]):t._e(),t._v(" "),i("div",{staticClass:"value"},[t._v(t._s(t.code_type?"提取码":"卡密")+"："+t._s(e.code)),i("span",{staticClass:"el-icon-copy-document",on:{click:function(i){t.doCopy(e.code)}}})])])}))]):t._e(),t._v(" "),t.list.refund_money?i("el-card",{staticStyle:{"margin-top":"25px"},attrs:{shadow:"always"}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",[t._v("退款详情")])]),t._v(" "),i("el-row",{staticStyle:{"line-height":"35px","font-size":"14px"},attrs:{type:"flex"}},[i("el-col",{attrs:{span:24}},[t._v("退款金额："+t._s(t._f("1000")(t.list.refund_money))+"元")])],1),t._v(" "),i("el-row",{staticStyle:{"line-height":"35px","font-size":"14px"},attrs:{type:"flex"}},[i("el-col",{attrs:{span:24}},[t._v("退款方式："+t._s(t.list.refund_way))])],1),t._v(" "),i("el-row",{staticStyle:{"line-height":"35px","font-size":"14px"},attrs:{type:"flex"}},[i("el-col",{attrs:{span:24}},[t._v("退款说明："+t._s(t.list.refund_reason))])],1)],1):t._e(),t._v(" "),i("div",{staticClass:"right",staticStyle:{"margin-top":"20px",filter:"alpha(Opacity=90)","-moz-opacity":"0.9",opacity:"0.9"}},[1!==t.list.state&&!t.list.refund_money||8===!t.list.state?i("el-button",{attrs:{loading:t.shipmentLoading,type:"danger"},on:{click:function(e){t.dialogFormVisible=!0}}},[t._v("退款")]):t._e(),t._v(" "),2===t.list.state?i("el-button",{attrs:{loading:t.shipmentLoading,type:"primary"},on:{click:function(e){t.shipmentSubmit()}}},[t._v("发货")]):t._e()],1),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogFormVisible,"close-on-click-modal":!1,title:"退款"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"refundForm",staticStyle:{width:"700px"},attrs:{rules:t.refundRules,model:t.refundTemp,"label-position":"left","label-width":"120px"}},[i("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"退款金额",prop:"refund_money"}},[i("el-input-number",{attrs:{precision:2,min:.01,max:t.list.total,label:"退款金额"},model:{value:t.refundTemp.refund_money,callback:function(e){t.$set(t.refundTemp,"refund_money",e)},expression:"refundTemp.refund_money"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"退款方式",prop:"refund_way"}},[i("el-radio-group",{model:{value:t.refundTemp.refund_way,callback:function(e){t.$set(t.refundTemp,"refund_way",e)},expression:"refundTemp.refund_way"}},[i("el-radio",{attrs:{label:0}},[t._v("退到余额")]),t._v(" "),i("el-radio",{attrs:{label:1}},[t._v("原路退回")])],1),t._v(" "),i("el-alert",{attrs:{title:"退到余额：将款项退到用户余额中;原路退回：用户通过哪个支付途径付款，就退回哪里",type:"warning"}})],1),t._v(" "),i("el-form-item",{staticStyle:{width:"600px"},attrs:{label:"退款理由",prop:"refund_reason"}},[i("el-input",{attrs:{placeholder:"请填写退款理由",maxlength:"500",clearable:""},model:{value:t.refundTemp.refund_reason,callback:function(e){t.$set(t.refundTemp,"refund_reason",e)},expression:"refundTemp.refund_reason"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v(t._s(t.$t("usuel.cancel")))]),t._v(" "),i("el-button",{attrs:{loading:t.shipmentLoading,type:"primary"},on:{click:function(e){t.refundData()}}},[t._v(t._s(t.$t("usuel.confirm")))])],1)],1),t._v(" "),t.list.good_location?i("el-dialog",{staticClass:"delivery",attrs:{visible:t.dialogInvoiceVisible,"close-on-click-modal":!1,center:"",fullscreen:""},on:{"update:visible":function(e){t.dialogInvoiceVisible=e}}},[i("div",{ref:"print"},[i("div",{staticClass:"text-center title"},[t._v(t._s(t.name))]),t._v(" "),i("div",{staticClass:"text-center name"},[t._v("送货单")]),t._v(" "),i("div",{staticClass:"message"},[i("div",[i("span",[t._v("客户姓名：")]),t._v(t._s(t.list.good_location.name))]),t._v(" "),i("div",[i("span",[t._v("订单号：")]),t._v(t._s(t.list.identification))]),t._v(" "),i("div",[i("span",[t._v("客户下单日期：")]),t._v(t._s(t.list.created_at))])]),t._v(" "),i("div",{staticClass:"location"},[i("span",[t._v("送货地址：")]),t._v(t._s(t.list.good_location.location)+" ("+t._s(t.list.good_location.address)+")")]),t._v(" "),i("div",{staticClass:"message"},[i("div",[i("span",[t._v("收货人：")]),t._v(t._s(t.list.good_location.name))]),t._v(" "),i("div",[i("span",[t._v("联系电话：")]),t._v(t._s(t.list.good_location.cellphone))]),t._v(" "),i("div",[i("span")])]),t._v(" "),i("div",{staticClass:"location"},[i("span",[t._v("备注：")]),t._v(t._s(t.list.remark?t.list.remark:""))]),t._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.list.goods_list,"summary-method":t.getSummaries,border:"","show-summary":""}},[i("el-table-column",{attrs:{type:"index",label:"编号",width:"50"}}),t._v(" "),i("el-table-column",{attrs:{label:"商品编码",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.identification))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"货号",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.articleNumber))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"商品名称",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"规格"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.specification))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"单价（元）",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.price))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"数量（件）",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.number))])]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"金额（元）",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.price*e.row.number))])]}}])})],1)],1),t._v(" "),i("div",{staticClass:"operation"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.print()}}},[t._v("打印")])],1)]):t._e()],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},N1eB:function(t,e,i){"use strict";var a=i("9vIq");i.n(a).a},Oy66:function(t,e,i){"use strict";var a=function(){var t=this.$createElement;return(this._self._c||t)("detail",{attrs:{"is-edit":!1}})},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},ZO9G:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){return t&&t.__esModule?t:{default:t}}(i("tC8k"));e.default={name:"IndentDetail",components:{Detail:a.default}}},nRRO:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(i("gDS+")),n=r(i("FyfS")),l=i("tN7b"),s=i("BeLl"),o=r(i("rdXg"));function r(t){return t&&t.__esModule?t:{default:t}}e.default={name:"IndentListDetails",data:function(){return{shipmentLoading:!1,name:"DSSHOP电商商城",dialogInvoiceVisible:!1,queryLoading:!1,order_progress:0,logistics:!1,list:{good_code:[]},dialogFormVisible:!1,listLoading:!0,id:this.$route.query.id,temp:{dhl_id:null,odd:""},receivingTemp:{id:0,new_receiving_time:""},receivingRules:{new_receiving_time:[{required:!0,message:"请设置新的自动收货时间",trigger:"change"}]},rules:{dhl_id:[{required:!0,message:"请选择物流公司",trigger:"change"}],odd:[{required:!0,message:"请输入运单号",trigger:"blur"}]},refundRules:{refund_money:[{required:!0,message:"请输入退款金额",trigger:"blur"}],refund_way:[{required:!0,message:"请选择退款方式",trigger:"change"}],refund_reason:[{required:!0,message:"请输入退款原因",trigger:"blur"}]},refundTemp:{refund_way:0,refund_reason:"",refund_money:"",refund_integral:"",integralDeduction:""},dhl:[],goodType:"普通商品",code_type:0}},created:function(){this.getList(),this.getDhl()},methods:{getList:function(){var t=this;this.listLoading=!0,(0,l.detail)(this.id).then(function(e){for(var i in e.data.goods_list){switch(e.data.state){case 1:t.order_progress=1;break;case 2:t.order_progress=2;break;case 3:t.order_progress=3;break;case 5:case 11:t.order_progress=4}e.data.goods_list[i].identification=e.data.goods_list[i].good.identification,e.data.goods_list[i].articleNumber=e.data.goods_list[i].good.number,e.data.goods_list[i].good_sku&&(t.code_type=e.data.goods_list[i].good_sku.code_type,e.data.goods_list[i].good_sku.product_sku.forEach(function(t){e.data.goods_list[i].specification?e.data.goods_list[i].specification+=t.key+":"+t.value+";":e.data.goods_list[i].specification=t.key+":"+t.value+";"}),e.data.goods_list[i].specification=e.data.goods_list[i].specification.substr(0,e.data.goods_list[i].specification.length-1)),t.goodType=e.data.goods_list[i].good.type}t.receivingTemp.new_receiving_time=e.data.receiving_time,t.receivingTemp.id=e.data.id,t.list=e.data,t.refundTemp.refund_money=t.list.total,t.refundTemp.refund_integral=t.list.integral,t.refundTemp.integralDeduction=t.list.integralDeduction;var a=t;t.list.payment_log_all.forEach(function(t){0===t.state&&a.queryNumber(t)}),t.listLoading=!1})},getDhl:function(){var t=this;(0,s.getList)().then(function(e){t.dhl=e.data;var i=!0,a=!1,l=void 0;try{for(var s,o=(0,n.default)(t.dhl);!(i=(s=o.next()).done);i=!0){var r=s.value;if(1===r.is_default){t.temp.dhl_id=r.id;break}}}catch(t){a=!0,l=t}finally{try{!i&&o.return&&o.return()}finally{if(a)throw l}}})},shipmentSubmit:function(){var t=this;this.shipmentLoading=!0,this.$refs.dataForm.validate(function(e){e?(t.temp.id=t.list.id,(0,l.shipment)(t.temp).then(function(){t.dialogFormVisible=!1,t.shipmentLoading=!1,t.$notify({title:t.$t("hint.succeed"),message:"发货成功",type:"success",duration:2e3}),setTimeout(t.$router.back(-1),2e3)}).catch(function(){t.shipmentLoading=!1})):(t.shipmentLoading=!1,t.$refs.odd.focus(),t.$notify({title:"",message:"请输入物流信息",type:"warning",duration:2e3}))})},refundData:function(){var t=this;this.shipmentLoading=!0,this.$refs.refundForm.validate(function(e){e?(0,l.refund)(t.list.id,t.refundTemp).then(function(){t.dialogFormVisible=!1,t.shipmentLoading=!1,t.$notify({title:t.$t("hint.succeed"),message:"退款成功",type:"success",duration:2e3}),setTimeout(t.$router.back(-1),2e3)}).catch(function(){t.shipmentLoading=!1}):t.shipmentLoading=!1})},queryNumber:function(t){(0,l.query)(t.id).then(function(){})},dhlUpdate:function(){this.temp=this.list},setDhlUpdate:function(){var t=this;this.shipmentLoading=!0,this.$refs.dataForm.validate(function(e){e?(0,l.dhl)(t.temp).then(function(){t.shipmentLoading=!1,t.temp={},t.getList(),t.$notify({title:t.$t("hint.succeed"),message:"保存成功",type:"success",duration:2e3})}).catch(function(){t.shipmentLoading=!1}):t.shipmentLoading=!1})},receivingEdit:function(){var t=this;this.shipmentLoading=!0,(0,l.receiving)(this.receivingTemp).then(function(){t.shipmentLoading=!1,t.getList(),t.$notify({title:t.$t("hint.succeed"),message:"修改成功",type:"success",duration:2e3})}).catch(function(){t.shipmentLoading=!1})},getSummaries:function(t){var e=t.columns,i=t.data,a=[];return e.forEach(function(t,e){0!==e?1!==e&&2!==e&&3!==e&&(6===e?i.length>0&&(a[e]=i.reduce(function(t,e){var i=Number(e.number);return isNaN(i)?t:t+e.number},0),a[e]+=" 件"):7===e&&i.length>0&&(a[e]=i.reduce(function(t,e){var i=Number(e.price);return isNaN(i)?t:t+e.number*e.price*100},0),a[e]=a[e]/100+" 元")):a[e]="总价"}),a},doCopy:function(t){var e=this;this.$copyText(t).then(function(t){e.$message({message:"复制成功",type:"success"})}).catch(function(){console.log("失败")})},print:function(){var t=[],e=JSON.parse((0,a.default)(this.list.goods_list));e.push({serial:"总价",money:220,number:1,name:"",identification:"",specification:"",articleNumber:"",price:""});var i=0,n=0;e.forEach(function(e,a){e.serial=e.serial?e.serial:a+1,e.money?(e.money=i,e.number=n):(i+=e.price*e.number,n+=e.number,e.money=e.price*e.number),t.push(e)}),(0,o.default)({printable:t,header:'<div style="text-align: center;font-size: 26px;font-weight: bold;line-height: 50px;">'+this.name+'</div>\n        <div style="text-align: center;font-size: 20px;font-weight: bold;padding-bottom: 50px;">送货单</div>\n        <div style="display: flex;">\n          <div style="line-height: 30px;flex:1;"><span>客户姓名：</span>'+this.list.good_location.name+'</div>\n          <div style="line-height: 30px;flex:1;"><span>订单号：</span>'+this.list.identification+'</div>\n          <div style="line-height: 30px;flex:1;"><span>下单日期：</span>'+this.list.created_at+'</div>\n        </div>\n        <div style="line-height: 30px;"><span>送货地址：</span>'+this.list.good_location.location+this.list.good_location.address+'</div>\n        <div style="display: flex;">\n          <div style="line-height: 30px;flex:1;"><span>收货人：</span>'+this.list.good_location.name+'</div>\n          <div style="line-height: 30px;flex:1;"><span>联系电话：</span>'+this.list.good_location.cellphone+'</div>\n          <div style="line-height: 30px;flex:1;"></div>\n        </div>\n        <div style="line-height: 30px;"><span>备注：</span>'+(this.list.remark?this.list.remark:"")+"</div>",properties:[{field:"serial",displayName:"编号"},{field:"name",displayName:"商品名称"},{field:"identification",displayName:"商品编码"},{field:"articleNumber",displayName:"货号"},{field:"specification",displayName:"规格"},{field:"price",displayName:"单价(元)"},{field:"number",displayName:"数量"},{field:"money",displayName:"金额"}],type:"json",gridHeaderStyle:"border: 1px solid #000;text-align:center",gridStyle:"border: 1px solid #000;text-align:center"})}}}},"q+2p":function(t,e,i){"use strict";i.r(e);var a=i("nRRO"),n=i.n(a);for(var l in a)"default"!==l&&function(t){i.d(e,t,function(){return a[t]})}(l);e.default=n.a},rC0N:function(t,e,i){"use strict";i.r(e);var a=i("Oy66"),n=i("+U+e");for(var l in n)"default"!==l&&function(t){i.d(e,t,function(){return n[t]})}(l);var s=i("KHd+"),o=Object(s.a)(n.default,a.a,a.b,!1,null,null,null);o.options.__file="detail.vue",e.default=o.exports},tC8k:function(t,e,i){"use strict";i.r(e);var a=i("Elrn"),n=i("q+2p");for(var l in n)"default"!==l&&function(t){i.d(e,t,function(){return n[t]})}(l);i("N1eB");var s=i("KHd+"),o=Object(s.a)(n.default,a.a,a.b,!1,null,"0ee8f847",null);o.options.__file="Detail.vue",e.default=o.exports},tN7b:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getList=function(t){return(0,a.default)({url:"indent",method:"GET",params:t})},e.detail=function(t){return(0,a.default)({url:"indent/"+t,method:"GET"})},e.shipment=function(t){return t=n.default.parse(t),(0,a.default)({url:"indent/shipment",method:"POST",data:t})},e.dhl=function(t){return t=n.default.parse(t),(0,a.default)({url:"indent/dhl",method:"POST",data:t})},e.query=function(t){return(0,a.default)({url:"indent/query/"+t,method:"GET"})},e.refund=function(t,e){return e=n.default.parse(e),(0,a.default)({url:"indent/refund/"+t,method:"POST",data:e})},e.receiving=function(t){return t=n.default.parse(t),(0,a.default)({url:"indent/receiving",method:"POST",data:t})};var a=l(i("t3Un")),n=l(i("Qyje"));function l(t){return t&&t.__esModule?t:{default:t}}}}]);