{"version":3,"file":"quadrant.js","sourceRoot":"","sources":["../../../../src/plots/scatter/components/quadrant.ts"],"names":[],"mappings":"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","sourcesContent":["import { each, isArray, isFunction, deepMix } from '@antv/util';\nimport BBox from '../../../util/bbox';\nimport { View, IGroup } from '../../../dependents';\n\ninterface ILabel {\n  position?: string;\n  text: string[] | Function;\n  offset?: number | Function;\n  style?: any;\n}\n\nexport interface QuadrantConfig {\n  visible?: boolean;\n  xBaseline?: number;\n  yBaseline?: number;\n  regionStyle?: any[] | any;\n  lineStyle?: any;\n  label?: ILabel;\n}\n\nexport interface IQuadrant extends QuadrantConfig {\n  view: View;\n  plotOptions: any;\n}\n\nexport default class Quadrant {\n  public options: IQuadrant;\n  protected view: View;\n  protected quadrantGroups: IGroup[] = [];\n  protected container: IGroup;\n  protected regionData: any[] = [];\n  protected lineData: any[] = [];\n\n  constructor(cfg: IQuadrant) {\n    this.options = cfg;\n    this.view = this.options.view;\n    this.init();\n  }\n\n  public init() {\n    const { xBaseline, yBaseline } = this.options;\n    const coord = this.view.getCoordinate();\n    // TODO: xBaseline和yBaseline支持百分比\n    // 根据 xBaseline 和 yBaseline 分割象限\n    const xScale = this.view.getScaleByField(this.options.plotOptions.xField);\n    const yScale = this.view.getScaleByField(this.options.plotOptions.yField);\n    // 先进行 x 方向的分割\n    let xRegion;\n    if (xBaseline > xScale.min && xBaseline < xScale.max) {\n      const ratio = (xBaseline - xScale.min) / (xScale.max - xScale.min);\n      xRegion = [\n        new BBox(coord.start.x, coord.end.y, coord.getWidth() * ratio, coord.getHeight()),\n        new BBox(\n          coord.start.x + coord.getWidth() * ratio,\n          coord.end.y,\n          coord.getWidth() * (1 - ratio),\n          coord.getHeight()\n        ),\n      ];\n      const verticalLineData = {\n        start: { x: coord.start.x + coord.getWidth() * ratio, y: coord.end.y },\n        end: { x: coord.start.x + coord.getWidth() * ratio, y: coord.start.y },\n      };\n      this.lineData.push(verticalLineData);\n    } else {\n      xRegion = [new BBox(coord.start.x, coord.end.y, coord.getWidth(), coord.getHeight())];\n    }\n    // 再进行 y 方向的分割\n    if (yBaseline > yScale.min && yBaseline < yScale.max) {\n      const ratio = (yBaseline - yScale.min) / (yScale.max - yScale.min);\n      const horizontalLineData = {\n        start: { x: coord.start.x, y: coord.start.y - coord.getHeight() * ratio },\n        end: { x: coord.end.x, y: coord.start.y - coord.getHeight() * ratio },\n      };\n      this.lineData.push(horizontalLineData);\n      const topQuadrant = {\n        name: xBaseline <= xScale.min ? 'top-right' : 'top-left',\n        bbox: new BBox(xRegion[0].minX, xRegion[0].minY, xRegion[0].width, xRegion[0].height * (1 - ratio)),\n        index: xBaseline <= xScale.min ? 2 : 0,\n      };\n      this.regionData.push(topQuadrant);\n      const bottomQuadrant = {\n        name: xBaseline <= xScale.min ? 'bottom-right' : 'bottom-left',\n        bbox: new BBox(\n          xRegion[0].minX,\n          xRegion[0].minY + xRegion[0].height * (1 - ratio),\n          xRegion[0].width,\n          xRegion[0].height * ratio\n        ),\n        index: xBaseline <= xScale.min ? 3 : 1,\n      };\n      this.regionData.push(bottomQuadrant);\n      // 四象限齐全\n      if (xRegion.length > 1) {\n        const rightTopQuadrant = {\n          name: 'top-right',\n          bbox: new BBox(xRegion[1].minX, xRegion[1].minY, xRegion[1].width, xRegion[1].height * (1 - ratio)),\n          index: 2,\n        };\n        this.regionData.push(rightTopQuadrant);\n        const rightBottomQuadrant = {\n          name: 'bottom-right',\n          bbox: new BBox(\n            xRegion[1].minX,\n            xRegion[1].minY + xRegion[1].height * (1 - ratio),\n            xRegion[1].width,\n            xRegion[1].height * ratio\n          ),\n          index: 3,\n        };\n        this.regionData.push(rightBottomQuadrant);\n      }\n    } else if (xRegion.length === 2) {\n      if (yBaseline <= yScale.min) {\n        const leftTopQuadrant = {\n          name: 'top-left',\n          bbox: xRegion[0],\n          index: 0,\n        };\n        this.regionData.push(leftTopQuadrant);\n        const rightTopQuadrant = {\n          name: 'top-right',\n          bbox: xRegion[1],\n          index: 2,\n        };\n        this.regionData.push(rightTopQuadrant);\n      } else {\n        const leftBottomQuadrant = {\n          name: 'bottom-left',\n          bbox: xRegion[0],\n          index: 1,\n        };\n        this.regionData.push(leftBottomQuadrant);\n        const rightBottomQuadrant = {\n          name: 'bottom-right',\n          bbox: xRegion[1],\n          index: 3,\n        };\n        this.regionData.push(rightBottomQuadrant);\n      }\n    } else {\n      // 当前绘制区域全部在一个象限中\n      if (xBaseline <= xScale.min) {\n        if (yBaseline <= yScale.min) {\n          const rightTopQuadrant = {\n            name: 'top-right',\n            bbox: xRegion[0],\n            index: 2,\n          };\n          this.regionData.push(rightTopQuadrant);\n        } else {\n          const rightBottomQuadrant = {\n            name: 'bottom-right',\n            bbox: xRegion[0],\n            index: 3,\n          };\n          this.regionData.push(rightBottomQuadrant);\n        }\n      } else {\n        if (yBaseline <= yScale.min) {\n          const leftTopQuadrant = {\n            name: 'top-left',\n            bbox: xRegion[0],\n            index: 0,\n          };\n          this.regionData.push(leftTopQuadrant);\n        } else {\n          const leftBottomQuadrant = {\n            name: 'bottom-left',\n            bbox: xRegion[0],\n            index: 1,\n          };\n          this.regionData.push(leftBottomQuadrant);\n        }\n      }\n    }\n    // 创建container\n    this.container = this.view.backgroundGroup.addGroup();\n  }\n\n  public render() {\n    if (this.regionData.length > 0) {\n      const defaultStyle = this.getDefaultStyle();\n      const regionStyle = this.getRegionStyle(this.regionData);\n      each(this.regionData, (d) => {\n        const { index } = d;\n        const group = this.container.addGroup();\n        const rect = group.addShape('rect', {\n          attrs: {\n            x: d.bbox.minX,\n            y: d.bbox.minY,\n            width: d.bbox.width,\n            height: d.bbox.height,\n            ...regionStyle[index],\n          },\n          name: 'quadrant',\n        });\n        if (this.options.label && this.options.label.text) {\n          const labelOptions = deepMix({}, defaultStyle.label, this.options.label);\n          const labelCfg = this.getLabelConfig(d, labelOptions);\n          group.addShape('text', {\n            attrs: {\n              ...labelCfg,\n            },\n            name: 'quadrant-label',\n          });\n        }\n        // rect.setSilent('data', d);\n        rect.set('data', d);\n        this.quadrantGroups.push(group);\n      });\n\n      // 绘制象限辅助线\n      const lineStyle = deepMix({}, defaultStyle.line, this.options.lineStyle);\n      each(this.lineData, (d) => {\n        this.container.addShape('path', {\n          attrs: {\n            path: [\n              ['M', d.start.x, d.start.y],\n              ['L', d.end.x, d.end.y],\n            ],\n            ...lineStyle,\n          },\n          name: 'quadrant-line',\n        });\n      });\n      this.view.canvas.draw();\n    }\n  }\n\n  public clear() {\n    if (this.container) {\n      this.container.clear();\n    }\n  }\n\n  public destroy() {\n    if (this.container) {\n      this.container.remove();\n    }\n  }\n\n  protected getDefaultStyle() {\n    return {\n      line: {\n        stroke: '#9ba29a',\n        lineWidth: 1,\n      },\n      regionStyle: [\n        { fill: '#000000', opacity: 0.05 },\n        { fill: '#ffffff', opacity: 0 },\n        { fill: '#ffffff', opacity: 0 },\n        { fill: '#000000', opacity: 0.05 },\n      ],\n      label: {\n        position: 'outter-inner',\n        offset: 10,\n        style: {\n          fontSize: 14,\n          fill: '#ccc',\n          // fontWeight: 100\n        },\n      },\n    };\n  }\n\n  private getRegionStyle(regionData) {\n    const defaultStyle = this.getDefaultStyle();\n    let style = defaultStyle.regionStyle;\n    if (this.options.regionStyle) {\n      const { regionStyle } = this.options;\n      if (isArray(regionStyle)) {\n        style = style.map((s, index) => {\n          if (regionStyle.length > index && regionStyle[index]) {\n            return regionStyle[index];\n          }\n          return s;\n        });\n      } else if (isFunction(regionStyle)) {\n        each(regionData, (d, index) => {\n          style[index] = regionStyle(d);\n        });\n      }\n    }\n\n    return style;\n  }\n\n  private getLabelConfig(region, labelOptions) {\n    const { index } = region;\n    let x = 0;\n    let y = 0;\n    let style: any = {};\n    let text = labelOptions.text;\n    if (isFunction(text)) {\n      text = text(region);\n    } else if (isArray(text)) {\n      text = text[index];\n    }\n    const { position } = labelOptions;\n    const pos = position.split('-');\n    const dim = region.name.split('-');\n    // x方向\n    if (dim[1] === 'left') {\n      if (pos[0] === 'inner') {\n        x = region.bbox.maxX - labelOptions.offset;\n        style.textAlign = 'right';\n      }\n      if (pos[0] === 'outter') {\n        x = region.bbox.minX + labelOptions.offset;\n        style.textAlign = 'left';\n      }\n    } else if (dim[1] === 'right') {\n      if (pos[0] === 'inner') {\n        x = region.bbox.minX + labelOptions.offset;\n        style.textAlign = 'left';\n      }\n      if (pos[0] === 'outter') {\n        x = region.bbox.maxX - labelOptions.offset;\n        style.textAlign = 'right';\n      }\n    }\n    // y方向\n    if (dim[0] === 'top') {\n      if (pos[1] === 'inner') {\n        y = region.bbox.maxY - labelOptions.offset;\n        style.textBaseline = 'bottom';\n      }\n      if (pos[1] === 'outter') {\n        y = region.bbox.minY + labelOptions.offset;\n        style.textBaseline = 'top';\n      }\n    } else if (dim[0] === 'bottom') {\n      if (pos[1] === 'inner') {\n        y = region.bbox.minY + labelOptions.offset;\n        style.textBaseline = 'top';\n      }\n      if (pos[1] === 'outter') {\n        y = region.bbox.maxY - labelOptions.offset;\n        style.textBaseline = 'bottom';\n      }\n    }\n    style = deepMix({}, labelOptions.style, style);\n    style.lineHeight = style.fontSize;\n    return {\n      x,\n      y,\n      text,\n      ...style,\n    };\n  }\n}\n"]}