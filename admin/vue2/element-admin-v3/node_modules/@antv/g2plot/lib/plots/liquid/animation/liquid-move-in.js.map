{"version":3,"file":"liquid-move-in.js","sourceRoot":"","sources":["../../../../src/plots/liquid/animation/liquid-move-in.ts"],"names":[],"mappings":";;AAAA,kDAAwD;AACxD,mCAAwC;AACxC,+CAAiD;AAEjD,SAAS,YAAY,CAAC,KAAK,EAAE,UAAU;IACrC,IAAM,SAAS,GAAG,KAAK,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;IACtC,IAAM,GAAG,GAAG,SAAS,CAAC,OAAO,EAAE,CAAC;IAChC,IAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,UAAG,CAAC,UAAU,EAAE,QAAQ,EAAE,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACxE,IAAM,KAAK,GAAG,UAAG,CAAC,UAAU,EAAE,OAAO,EAAE,CAAC,CAAC,CAAC;IAC1C,IAAM,QAAQ,GAAG,UAAG,CAAC,UAAU,EAAE,UAAU,EAAE,GAAG,CAAC,CAAC;IAC1C,IAAA,QAAQ,GAAK,UAAU,SAAf,CAAgB;IAEhC,IAAM,OAAO,GAAG,CAAC,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IAC1C,IAAM,OAAO,GAAG,GAAG,CAAC,IAAI,CAAC;IAEzB,IAAM,IAAI,GAAG,SAAS,CAAC,IAAI,CAAC,UAAC,KAAK,IAAK,OAAA,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,MAAM,EAA3B,CAA2B,CAAC,CAAC;IACpE,IAAM,iBAAiB,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;IAC/C,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;IACxB,IAAI,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,iBAAiB,EAAE,EAAE,QAAQ,GAAG,MAAM,EAAE,YAAY,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;IAC3F,IAAM,KAAK,GAAG,SAAS,CAAC,IAAI,CAAC,UAAC,KAAK,IAAK,OAAA,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,OAAO,EAA5B,CAA4B,CAAC,CAAC;IACtE,IAAM,iBAAiB,GAAG,YAAK,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;IACrF,IAAM,eAAe,GAAG,kBAAS,CAAC,iBAAiB,EAAE;QACnD,CAAC,GAAG,EAAE,CAAC,OAAO,EAAE,CAAC,OAAO,CAAC;QACzB,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;QACX,CAAC,GAAG,EAAE,OAAO,EAAE,OAAO,CAAC;KACxB,CAAC,CAAC;IACH,KAAK,CAAC,SAAS,CAAC,eAAe,CAAC,CAAC;IACjC,KAAK,CAAC,OAAO,CACX,EAAE,MAAM,EAAE,iBAAiB,EAAE,EAC7B,QAAQ,EACR,UAAU,CAAC,MAAM,EACjB,cAAM,OAAA,QAAQ,IAAI,QAAQ,CAAC,SAAS,EAAE,IAAI,EAAE,KAAK,CAAC,EAA5C,CAA4C,EAClD,KAAK,CACN,CAAC;AACJ,CAAC;AACD,YAAY,CAAC,aAAa,GAAG,cAAc,CAAC;AAC5C,8BAAiB,CAAC,cAAc,EAAE,YAAY,CAAC,CAAC","sourcesContent":["import { registerAnimation } from '../../../dependents';\nimport { get, clone } from '@antv/util';\nimport { transform } from '../../../util/g-util';\n\nfunction liquidMoveIn(shape, animateCfg) {\n  const container = shape.get('parent');\n  const box = container.getBBox();\n  const factor = Math.min(Math.max(0, get(animateCfg, 'factor', 0.5)), 1);\n  const delay = get(animateCfg, 'delay', 0);\n  const duration = get(animateCfg, 'duration', 800);\n  const { callback } = animateCfg;\n\n  const originX = (box.minX + box.maxX) / 2;\n  const originY = box.maxY;\n\n  const wrap = container.find((shape) => shape.get('name') == 'wrap');\n  const wrapTargetOpacity = wrap.attr('opacity');\n  wrap.attr('opacity', 0);\n  wrap.animate({ opacity: wrapTargetOpacity }, duration * factor, 'easeLinear', null, delay);\n  const waves = container.find((shape) => shape.get('name') == 'waves');\n  const wavesTargetMatrix = clone(waves.attr('matrix')) || [1, 0, 0, 0, 1, 0, 0, 0, 1];\n  const transformMatrix = transform(wavesTargetMatrix, [\n    ['t', -originX, -originY],\n    ['s', 1, 0],\n    ['t', originX, originY],\n  ]);\n  waves.setMatrix(transformMatrix);\n  waves.animate(\n    { matrix: wavesTargetMatrix },\n    duration,\n    animateCfg.easing,\n    () => callback && callback(container, wrap, waves),\n    delay\n  );\n}\nliquidMoveIn.animationName = 'liquidMoveIn';\nregisterAnimation('liquidMoveIn', liquidMoveIn);\n"]}