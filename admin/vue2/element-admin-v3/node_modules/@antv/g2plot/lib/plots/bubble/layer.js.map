{"version":3,"file":"layer.js","sourceRoot":"","sources":["../../../src/plots/bubble/layer.ts"],"names":[],"mappings":";;;AAAA,mCAAqC;AACrC,4CAAqD;AAErD,oEAAgD;AAChD,mEAAmE;AACnE,mBAAiB;AACjB,mBAAiB;AAWjB;IAA0F,uCAAe;IAAzG;QAAA,qEA6CC;QAjBQ,UAAI,GAAW,QAAQ,CAAC;;IAiBjC,CAAC;IA5Ce,6BAAiB,GAA/B;QACE,OAAO,cAAO,CAAC,EAAE,EAAE,OAAM,iBAAiB,WAAE,EAAE;YAC5C,sBAAsB;YACtB,SAAS,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC;YAClB,UAAU,EAAE;gBACV,MAAM,EAAE,IAAI;gBACZ,aAAa,EAAE,CAAC;gBAChB,WAAW,EAAE,GAAG;aACjB;YACD,KAAK,EAAE;gBACL,QAAQ,EAAE,QAAQ;gBAClB,KAAK,EAAE;oBACL,MAAM,EAAE,MAAM;oBACd,SAAS,EAAE,CAAC;iBACb;aACF;YACD,KAAK,EAAE,cAAc;SACtB,CAAC,CAAC;IACL,CAAC;IAEM,kCAAY,GAAnB;QACU,IAAA,SAAS,GAAK,IAAI,CAAC,OAAO,UAAjB,CAAkB;QACnC,IAAI,SAAS,EAAE;YACb,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;SACtC;IACH,CAAC;IAIS,4BAAM,GAAhB;;QACE,iBAAM,MAAM,WAAE,CAAC;QAEf,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,OAAO,KAAK,KAAK,EAAE;YAChE,OAAO;SACR;QAED,IAAI,CAAC,SAAS,CAAC,SAAS;YACtB,GAAC,IAAI,CAAC,OAAO,CAAC,SAAS,IAAG,KAAK;gBAC/B,CAAC;IACL,CAAC;IAES,iCAAW,GAArB;QACE,iBAAM,WAAW,YAAC,WAAW,CAAC,CAAC;IACjC,CAAC;IACH,kBAAC;AAAD,CAAC,AA7CD,CAA0F,eAAY,GA6CrG;;AAED,yBAAgB,CAAC,QAAQ,EAAE,WAAW,CAAC,CAAC","sourcesContent":["import { deepMix } from '@antv/util';\nimport { registerPlotType } from '../../base/global';\nimport { LayerConfig } from '../../base/layer';\nimport * as EventParser from '../scatter/event';\nimport ScatterLayer, { ScatterViewConfig } from '../scatter/layer';\nimport './shape';\nimport './theme';\n\nexport interface BubbleViewConfig extends ScatterViewConfig {\n  /** 气泡大小 */\n  pointSize?: [number, number];\n  /** 气泡大小字段 */\n  sizeField?: string;\n}\n\nexport interface BubbleLayerConfig extends BubbleViewConfig, LayerConfig {}\n\nexport default class BubbleLayer<T extends BubbleLayerConfig = BubbleLayerConfig> extends ScatterLayer<T> {\n  public static getDefaultOptions(): any {\n    return deepMix({}, super.getDefaultOptions(), {\n      // 直径 min 4px；max 64px\n      pointSize: [2, 32],\n      pointStyle: {\n        stroke: null,\n        strokeOpacity: 1,\n        fillOpacity: 0.5,\n      },\n      label: {\n        position: 'middle',\n        style: {\n          stroke: '#fff',\n          lineWidth: 2,\n        },\n      },\n      shape: 'bubble-point',\n    });\n  }\n\n  public getSizeScale() {\n    const { sizeField } = this.options;\n    if (sizeField) {\n      this.view.getScaleByField(sizeField);\n    }\n  }\n\n  public type: string = 'bubble';\n\n  protected legend() {\n    super.legend();\n\n    if (this.options.legend && this.options.legend.visible === false) {\n      return;\n    }\n\n    this.setConfig('legends', {\n      [this.options.sizeField]: false,\n    });\n  }\n\n  protected parseEvents() {\n    super.parseEvents(EventParser);\n  }\n}\n\nregisterPlotType('bubble', BubbleLayer);\n"]}