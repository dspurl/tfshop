{"version":3,"file":"button.js","sourceRoot":"","sources":["../../../src/components/timeline/button.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @file 播放轴组件按钮\n * @author blackganglion\n */\n\nimport { IShape, IGroup } from '@antv/g-base';\nimport { deepMix } from '@antv/util';\nimport BaseComponent, { BaseComponentConfig } from '../base';\n\n/** 播放按钮配置 */\ninterface ButtonCfg extends BaseComponentConfig {\n  /** 按钮位置数据 */\n  readonly x: number;\n  readonly y: number;\n  readonly r: number;\n  readonly isPlay: boolean;\n}\n\nexport default class Button extends BaseComponent<ButtonCfg> {\n  /** 圆点 */\n  private circle: IShape;\n  /** 开始 marker */\n  private startMarker: IShape;\n  /** 暂停 marker */\n  private pauseGroupMarker: IGroup;\n  private pauseLeftMarker: IShape;\n  private pauseRightMarker: IShape;\n\n  constructor(cfg: ButtonCfg) {\n    super(deepMix({}, cfg));\n  }\n\n  protected renderInner(group: IGroup) {\n    this.initElement(group);\n    this.updateElement();\n    this.renderMarker();\n\n    group.off('click');\n    group.on('click', () => {\n      this.emit('click');\n    });\n  }\n\n  public destroy() {\n    this.group.off();\n    super.destroy();\n  }\n\n  private initElement(group: IGroup) {\n    this.circle = group.addShape('circle', {\n      attrs: {\n        x: this.config.x,\n        y: this.config.y,\n        r: this.config.r,\n        fill: '#607889',\n      },\n    });\n\n    this.startMarker = group.addShape('path', {\n      attrs: {\n        path: this.getStartMarkerPath(),\n        fill: '#ffffff',\n      },\n    });\n\n    this.pauseGroupMarker = group.addGroup();\n    const width = (1 / 4) * this.config.r;\n    const height = 0.5 * this.config.r * Math.sqrt(3);\n    this.pauseLeftMarker = this.pauseGroupMarker.addShape('rect', {\n      attrs: {\n        x: this.config.x - (1 / 4 + 1 / 8) * this.config.r,\n        y: this.config.y - height / 2,\n        width,\n        height,\n        fill: '#ffffff',\n      },\n    });\n    this.pauseRightMarker = this.pauseGroupMarker.addShape('rect', {\n      attrs: {\n        x: this.config.x + (1 / 8) * this.config.r,\n        y: this.config.y - height / 2,\n        width,\n        height,\n        fill: '#ffffff',\n      },\n    });\n  }\n\n  private updateElement() {\n    this.circle.attr('x', this.config.x);\n    this.circle.attr('y', this.config.y);\n    this.circle.attr('r', this.config.r);\n\n    this.startMarker.attr('path', this.getStartMarkerPath());\n\n    const width = (1 / 4) * this.config.r;\n    const height = 0.5 * this.config.r * Math.sqrt(3);\n\n    this.pauseLeftMarker.attr('x', this.config.x - (1 / 4 + 1 / 8) * this.config.r);\n    this.pauseLeftMarker.attr('y', this.config.y - height / 2);\n    this.pauseLeftMarker.attr('width', width);\n    this.pauseLeftMarker.attr('height', height);\n\n    this.pauseRightMarker.attr('x', this.config.x + (1 / 8) * this.config.r);\n    this.pauseRightMarker.attr('y', this.config.y - height / 2);\n    this.pauseRightMarker.attr('width', width);\n    this.pauseRightMarker.attr('height', height);\n  }\n\n  private renderMarker() {\n    if (this.config.isPlay) {\n      this.startMarker.hide();\n      this.pauseGroupMarker.show();\n    } else {\n      this.startMarker.show();\n      this.pauseGroupMarker.hide();\n    }\n  }\n\n  /** 获取播放键 marker path */\n  private getStartMarkerPath() {\n    const sideLength = 0.5 * this.config.r * Math.sqrt(3);\n    return [\n      ['M', this.config.x - sideLength / Math.sqrt(3) / 2, this.config.y - sideLength / 2],\n      ['L', this.config.x + sideLength / Math.sqrt(3), this.config.y],\n      ['L', this.config.x - sideLength / Math.sqrt(3) / 2, this.config.y + sideLength / 2],\n    ];\n  }\n}\n"]}