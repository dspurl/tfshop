(window.webpackJsonp=window.webpackJsonp||[]).push([[49,47],{729:function(t,e,o){var content=o(811);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(12).default)("7b4ed3f0",content,!0,{sourceMap:!1})},791:function(t,e,o){"use strict";o.r(e);o(25),o(50),o(91);var n=o(124),r=o(7),l=o(19),d=o.n(l);var c=o(727),v=o.n(c),m=o(728),f=o.n(m);e.default={components:{VueCountdown:v.a,VueQrcode:f.a},layout:"cart",middleware:"auth",head:function(){return{title:"支付订单-DSSHOP商城-跨终端商城解决方案"}},data:function(){return{loading:!0,detail:!1,centerDialogVisible:!1,buttonLoading:!1,qrcode:"",timer:null,list:{}}},mounted:function(){$nuxt.$store.commit("setCartTitle","支付订单"),this.getList()},methods:{getList:function(){var t=this;Object(n.h)($nuxt.$route.query.id).then((function(e){1!==e.state&&(4===e.state?$nuxt.$router.replace({path:"/user/indent/detail",query:{id:$nuxt.$route.query.id}}):$nuxt.$router.replace("/money/success")),t.loading=!1,t.list=e})).catch((function(e){t.$message({message:"请求参数有误",type:"error"})}))},showDetail:function(){this.detail=!this.detail},payment:function(t){var data,e=this;this.buttonLoading=!0,1===t?(data={id:$nuxt.$route.query.id},data=d.a.parse(data),Object(r.a)({url:"balancePay",method:"POST",data:data})).then((function(t){e.buttonLoading=!1,$nuxt.$router.replace("/money/success")})):function(data){return data=d.a.parse(data),Object(r.a)({url:"unifiedPayment",method:"POST",data:data})}({id:$nuxt.$route.query.id,platform:t,trade_type:"NATIVE",type:"goodsIndent"}).then((function(t){e.centerDialogVisible=!0,e.qrcode=t.code_url,e.buttonLoading=!1,e.timer?(clearInterval(e.timer),e.timer=setInterval((function(){e.getList()}),5e3)):e.timer=setInterval((function(){e.getList()}),5e3)})).catch((function(t){e.$message({message:"支付配置有误，请检查",type:"error"})}))}},destroyed:function(){clearInterval(this.timer)}}},809:function(t,e,o){t.exports=o.p+"img/weixin-pay.ee5865e.jpg"},810:function(t,e,o){"use strict";o(729)},811:function(t,e,o){var n=o(11)(!1);n.push([t.i,".vue-qrcode[data-v-40e52894]{text-align:center}.main-color[data-v-40e52894]{margin-left:5px;margin-right:5px;color:#fa524c}.money-pay[data-v-40e52894]{margin:40px 0}.mode-payment-box[data-v-40e52894]{margin-top:30px}.mode-payment-box .title[data-v-40e52894]{font-size:18px;margin-top:10px}.mode-payment-box .min-title[data-v-40e52894]{font-size:16px;color:#616161;margin-bottom:20px}.mode-payment-box .list[data-v-40e52894]{display:flex;margin-bottom:20px}.mode-payment-box .list .li[data-v-40e52894]{border:1px solid #e0e0e0;text-align:center;cursor:pointer;overflow:hidden;min-width:174px;height:60px;line-height:60px;margin-left:14px;padding-left:10px;padding-right:10px}.mode-payment-box .list .li.on[data-v-40e52894],.mode-payment-box .list .li[data-v-40e52894]:hover{border-color:#fa524c}.pay-order[data-v-40e52894]{margin-top:20px;margin-bottom:20px;display:flex}.pay-order .el-icon-circle-check[data-v-40e52894]{font-size:80px;color:#83c44e;margin-left:30px;margin-right:30px}.pay-order .order-info[data-v-40e52894]{position:relative;flex:1;color:#616161;margin-bottom:5px;margin-right:20px;line-height:2;font-size:14px}.pay-order .order-info .title[data-v-40e52894]{margin-bottom:10px;font-size:24px;font-weight:400;line-height:36px}.pay-order .order-info .warn span[data-v-40e52894]{color:#fa524c;margin:0 5px}.pay-order .order-info .fright[data-v-40e52894]{position:absolute;top:10px;right:0}.pay-order .order-info .fright .show-detail[data-v-40e52894]{cursor:pointer;text-align:right;margin-right:5px}.pay-order .order-info .fright .show-detail[data-v-40e52894]:hover{color:#fa524c}.pay-order .order-info .fright .total[data-v-40e52894]{display:flex;line-height:30px}.pay-order .order-info .fright .total .price[data-v-40e52894]{position:relative;top:-5px;color:#fa524c}.pay-order .order-info .fright .total .price span[data-v-40e52894]{font-size:24px}.pay-order .order-info .fright .iconfont[data-v-40e52894]{position:relative;left:5px;font-size:12px}.pay-order .order-info .order-details li[data-v-40e52894]{display:flex}.pay-order .order-info .order-details li .label[data-v-40e52894]{width:80px}.pay-order .order-info .order-details li .content .on[data-v-40e52894]{color:#fa524c}",""]),t.exports=n},902:function(t,e,o){"use strict";o.r(e);var n=o(791).default,r=(o(810),o(6)),component=Object(r.a)(n,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box"},[n("div",{staticClass:"money-pay"},[n("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"container",attrs:{shadow:"always"}},[n("div",{staticClass:"pay-order"},[n("div",{staticClass:"el-icon-circle-check"}),t._v(" "),n("div",{staticClass:"order-info"},[n("div",{staticClass:"title"},[t._v("订单提交成功！去付款咯～")]),t._v(" "),n("div",{staticClass:"warn"},[t._v("请在"),n("span",[n("no-ssr",[t.list.overtime_time?n("vue-countdown",{attrs:{time:1e3*t.list.overtime_time},on:{end:t.getList},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.days,n=e.hours,r=e.minutes,l=e.seconds;return[t._v("\n                "+t._s(o)+" 天 "+t._s(n)+" 小时 "+t._s(r)+" 分 "+t._s(l)+" 秒\n              ")]}}],null,!1,1850809108)}):t._e()],1)],1),t._v("内完成支付, 超时后将取消订单")]),t._v(" "),t.list.good_location?n("div",{directives:[{name:"show",rawName:"v-show",value:!t.detail,expression:"!detail"}],staticClass:"address"},[t._v("收货信息："+t._s(t.list.good_location.name)+" "+t._s(t.list.good_location.cellphone)+" "+t._s(t.list.good_location.location)),t.list.good_location.address?[t._v("("+t._s(t.list.good_location.address)+")")]:t._e()],2):t._e(),t._v(" "),t.list.good_location?n("div",{directives:[{name:"show",rawName:"v-show",value:t.detail,expression:"detail"}],staticClass:"order-details"},[n("el-divider"),t._v(" "),n("ul",[n("li",[n("div",{staticClass:"label"},[t._v("订单号：")]),t._v(" "),n("div",{staticClass:"content"},[n("span",{staticClass:"on"},[t._v(t._s(t.list.identification))])])]),t._v(" "),n("li",[n("div",{staticClass:"label"},[t._v("收货信息：")]),t._v(" "),n("div",{staticClass:"content"},[t._v(t._s(t.list.good_location.name)+" "+t._s(t.list.good_location.cellphone)+" "+t._s(t.list.good_location.location)),t.list.good_location.address?[t._v("("+t._s(t.list.good_location.address)+")")]:t._e()],2)]),t._v(" "),n("li",[n("div",{staticClass:"label"},[t._v("商品名称：")]),t._v(" "),n("div",{staticClass:"content"},t._l(t.list.goods_list,(function(e,o){return n("span",{key:o},[t._v(t._s(e.good.name)+" ")])})),0)])])],1):t._e(),t._v(" "),n("div",{staticClass:"fright"},[n("div",{staticClass:"total"},[t._v("应付总额："),n("div",{staticClass:"price"},[n("span",[t._v(t._s(t._f("thousands")(t.list.total?t.list.total:0)))]),t._v("元")])]),t._v(" "),t.list.good_location?n("div",{staticClass:"show-detail",on:{click:t.showDetail}},[t._v("订单详情"),n("i",{staticClass:"iconfont dsshop-xia"})]):t._e()])])])]),t._v(" "),n("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"container mode-payment-box",attrs:{shadow:"always"}},[n("div",{staticClass:"title"},[t._v("选择以下支付方式付款")]),t._v(" "),n("el-divider"),t._v(" "),n("div",{staticClass:"min-title"},[t._v("支付方式")]),t._v(" "),n("div",{staticClass:"list"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.buttonLoading,expression:"buttonLoading"}],staticClass:"li",on:{click:function(e){return t.payment("weixin")}}},[n("el-image",{staticClass:"image",attrs:{src:o(809),fit:"cover"}})],1),t._v(" "),t.list.user?n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.buttonLoading,expression:"buttonLoading"}],staticClass:"li",on:{click:function(e){return t.payment(1)}}},[t._v("\n          预存款支付（"+t._s(t._f("thousands")(t.list.user.money))+"）\n        ")]):t._e()])],1)],1),t._v(" "),n("el-dialog",{attrs:{title:"微信支付",visible:t.centerDialogVisible,"close-on-click-modal":!1,width:"400px",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e}}},[n("div",{staticClass:"vue-qrcode"},[n("vue-qrcode",{attrs:{value:t.qrcode,options:{width:250}}})],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("div",[t._v("请使用"),n("span",{staticClass:"main-color"},[t._v("微信")]),t._v("扫一扫")]),t._v(" "),n("div",[t._v("二维码完成支付")])])])],1)}),[],!1,null,"40e52894",null);e.default=component.exports}}]);