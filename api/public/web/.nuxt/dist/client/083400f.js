(window.webpackJsonp=window.webpackJsonp||[]).push([[61,86],{505:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return m}));var r=n(8),o=n(19),l=n.n(o);function c(){return Object(r.a)({url:"user",method:"GET"})}function d(data){return data=l.a.parse(data),Object(r.a)({url:"user",method:"POST",data:data})}function m(data){return data=l.a.parse(data),Object(r.a)({url:"cancel",method:"POST",data:data})}},600:function(e,t,n){"use strict";n.r(t);var r=n(17),o=n(7),l=(n(36),n(13),n(24),n(30),n(90),n(505)),c=n(188);t.default={layout:"user",head:function(){return{title:"修改手机号-个人中心"}},data:function(){return{buttonLoading:!1,loading:!0,disabled:!1,codename:"获取验证码",seconds:"",cellphone:"",unit:"",user:{},ruleForm:{cellphone:"",code:"",state:2},rules:{cellphone:[{required:!0,message:"请输入新手机号",trigger:"blur"},{validator:function(e,t,n){if(""===t)n(new Error("请输入手机号"));else{/^(((13[0-9]{1})|(15[0-9]{1})|(16[0-9]{1})|(18[0-9]{1})|(17[0-9]{1}))+\d{8})$/.test(t)||n(new Error("手机号格式有误")),n()}},trigger:"blur"}],code:[{required:!0,message:"请输入验证码",trigger:"blur"}]}}},mounted:function(){this.getUser()},methods:{getUser:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([Object(l.b)(e.listQuery)]).then((function(t){var n=Object(r.a)(t,1)[0];e.user=n,e.cellphone=JSON.parse(JSON.stringify(n.cellphone)),e.loading=!1})).catch((function(t){e.loading=!1}));case 2:case"end":return t.stop()}}),t)})))()},getCode:function(){var e=this,t=this;this.buttonLoading=!0,Object(c.b)(this.ruleForm).then((function(n){e.seconds=60,e.codename="",e.unit="s",e.disabled=!0,e.buttonLoading=!1,e.timer=setInterval((function(){t.seconds=t.seconds-1,0===t.seconds&&(clearInterval(t.timer),t.seconds="",t.codename="获取验证码",t.unit="",t.codeDisabled=!1)}),1e3),n.code&&(t.ruleForm.code=n.code)})).catch((function(){e.buttonLoading=!1}))},submitForm:function(){var e=this;this.$refs.ruleForm.validate((function(t){t&&(e.loading=!0,e.buttonLoading=!0,Object(c.c)(e.ruleForm).then((function(t){e.loading=!1,e.buttonLoading=!1,e.getUser(),e.$refs.ruleForm.resetFields(),e.$message({message:"修改成功",type:"success"})})).catch((function(){e.loading=!1,e.buttonLoading=!1})))}))},resetForm:function(e){this.$refs[e].resetFields()}}}},601:function(e,t,n){var content=n(683);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(12).default)("06eb9b3c",content,!0,{sourceMap:!1})},682:function(e,t,n){"use strict";n(601)},683:function(e,t,n){var r=n(11)(!1);r.push([e.i,".ruleForm[data-v-7fb26b78]{width:500px}.ruleForm .code-button[data-v-7fb26b78]{position:absolute;right:5px;top:6px}.user-title[data-v-7fb26b78]{color:#757575;font-weight:400;font-size:18px;margin-bottom:20px}",""]),e.exports=r},762:function(e,t,n){"use strict";n.r(t);var r=n(600).default,o=(n(682),n(6)),component=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"box"},[n("div",{staticClass:"user-title"},[e._v("修改手机号")]),e._v(" "),n("div",{staticClass:"padding-top-20"},[n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"ruleForm",staticClass:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"200px"}},[n("el-form-item",{attrs:{label:"当前手机号"}},[e._v("\n        "+e._s(e.cellphone)+"\n      ")]),e._v(" "),n("el-form-item",{attrs:{label:"新的手机号",prop:"cellphone"}},[n("el-input",{attrs:{maxlength:"11",clearable:"",placeholder:"请输入手机号"},model:{value:e.ruleForm.cellphone,callback:function(t){e.$set(e.ruleForm,"cellphone",t)},expression:"ruleForm.cellphone"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"验证码",prop:"code"}},[n("el-input",{attrs:{maxlength:"5",placeholder:"请输入验证码",clearable:""},model:{value:e.ruleForm.code,callback:function(t){e.$set(e.ruleForm,"code",t)},expression:"ruleForm.code"}}),e._v(" "),n("el-button",{staticClass:"code-button",attrs:{loading:e.buttonLoading,type:"danger",round:"",size:"mini",disabled:e.disabled},on:{click:e.getCode}},[e._v(e._s(e.codename+e.seconds+e.unit))])],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{loading:e.buttonLoading,type:"danger"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确认修改")]),e._v(" "),n("el-button",{attrs:{loading:e.buttonLoading},on:{click:function(t){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)])}),[],!1,null,"7fb26b78",null);t.default=component.exports}}]);